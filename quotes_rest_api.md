# 行情和盘口REST API 参考 v1

## 响应格式
所有推送消息均为JSON，包含:
+ 预留状态码(**code**);
+ 数据(**data**)

示例如下：
``` javascript
{
    "code":0,   // 状态码，正确响应时为0
    "data":{
        ...     // 推送数据
    }
}
```

### 状态码

#### 1001 参数缺失

示例如下：

``` javascript
{
    "code": 1001,     // 状态码
    "data": "pair"    // 缺失的参数
}
```

#### 1002 参数无效

示例如下：

``` javascript
{
    "code": 1002,     // 状态码
    "data": "pair"    // 无效的参数
}
```



#### 1003 参数类型不匹配

示例如下：

``` javascript
{
    "code": 1003,     // 状态码
    "data": "pair"    // 类型不匹配的参数
}
```

​

#### 1004 交易对不存在

示例如下：

``` javascript
{
    "code":1004,      // 状态码
    "data":"1111"     // 不存在的交易对名称
}
```

## 路径

### 全部交易品种数据
URI：**/v1/market/pairs**
请求方式：**GET**
请求示例：
``` text
curl https://q.sfex.net/v1/market/pairs
```

响应示例：
``` javascript
{
    "code": 0,
    "data": [
        "BTC_USDT",
        "ETH_USDT",
        "SF_USDT"
    ]
}
```

### 大盘周期数据
URI：**/v1/market/histories?period={period}&pairs={pairs}**
请求方式：**GET**
请求参数：

| 参数名         | 类型        | 说明 | 是否必需 |
| ------------- |:------------- | :-----| :-----:|
| period | 字符串 | 行情周期 | 是 |
| pairs | 字符串 | 指定交易对，以逗号分割 | 否 |

#### 周期参数(**period**)

|  参数  | 定义  |  参数  | 定义  |  参数  | 定义  |
| :---: | :---: | :---: | :---: | :---: | :---: |
|  1m   |  一分钟  |  1h   |  一小时  |  1d   |    日    |
|  5m   |  五分钟  |  2h   |  两小时  |  1w   |    周    |
|  15m  | 十五分钟 |  4h   |  四小时  |  1M   |    月    |
|  30m  | 三十分钟 |  6h   |  六小时  |
|       |         |  12h  | 十二小时 |

请求示例：
不传递**pairs**参数
``` text
curl https://q.sfex.net/v1/market/histories?period=1d
```

响应示例：
``` javascript
{
    "code": 0,
    "data": [
        {
            "time": 1558281600000,          // 时间，单位毫秒
            "pair": "SF_USDT",
            "values": [
                "0.014215",                 // 起始价
                "0.014718",                 // 结束价
                "0.013566",                 // 最低价
                "0.0153",                   // 最高价
                "92691712.722288",          // 成交量
                "1329028.071978119711",     // 成交额
                "0.014215",                 // 上一周期结束价
                "5244",                     // 成交笔数
                "13804.469072"              // 现量
            ]
        },
        {
            "time": 1558281600000,
            "pair": "ETH_USDT",
            "values": [
                "254.71",
                "253.94",
                "245.72",       
                "263.82",
                "17539.674619700161108028",
                "4457843.14170528218201155012",
                "254.71",
                "6371",
                "2.5899"
            ]
        },
        {
            "time": 1558281600000,
            "pair": "BTC_USDT",
            "values": [
                "7961.23",
                "8022.51",
                "7806.81",
                "8273.99",
                "808.3006795579396348862",
                "6466268.900381768225611237096",
                "7961.23",
                "6336",
                "0.5688500000000001"
            ]
        }
    ]
}
```

请求示例：
传递**pairs**参数，并传递一个不存在的交易对
``` text
curl https://q.sfex.net/v1/market/histories?pairs=ETH_USDT,BTC_USDT,UNKNOWN&period=1d
```

响应示例：
``` javascript
{
    "code": 0,
    "data": [
        {
            "time": 1558281600000,
            "pair": "ETH_USDT",
            "values": [
                "254.71",
                "254.89",
                "245.72",
                "263.82",
                "17820.184069140884094656",
                "4529263.59998915724889442399",
                "254.71",
                "6453",
                "0.18225"
            ]
        },
        {
            "time": 1558281600000,
            "pair": "BTC_USDT",
            "values": [
                "7961.23",
                "8077.14",
                "7806.81",
                "8273.99",
                "817.6197795579396350112",
                "6541393.650655768226618399616",
                "7961.23",
                "6415",
                "0.014100000000000001"
            ]
        }
    ]
}
```

### 大盘报价数据
URI：**/v1/market/tickers**
请求方式：**GET**
请求参数：

| 参数名         | 类型        | 说明 | 是否必需 |
| ------------- |:------------- | :-----| :-----:|
| pairs | 字符串 | 指定交易对，以逗号分割 | 否 |

请求示例：
不传递**pair**参数
``` text
curl https://q.sfex.net/v1/market/tickers
```

响应示例：
``` javascript
{
    "code": 0,
    "data": [
        {
            "time": 1558325401318,                // 时间，单位毫秒
            "pair": "ETH_USDT",                   // 交易对名称
            "current": "255.23",                  // 现价
            "volume_current": "0.01",             // 现量
            "increment_24h": "4.98",           	  // 24小时价格变化量
            "highest_24h": "263.82",              // 24小时最高价
            "lowest_24h": "245.72",               // 24小时最低价
            "volume_24h": "36475.19836671636",    // 24小时成交量
            "highest_bid": "254.91",              // 买一价
            "highest_bid_amount": "0.9331",       // 买一量
            "lowest_ask": "255.29",               // 卖一价
            "lowest_ask_amount": "1.0003",        // 卖一量
            "change_24h": "1.99"                  // 24小时涨跌幅，百分比
        },
        {
            "time": 1558325401506,
            "pair": "BTC_USDT",
            "current": "8101.49",
            "volume_current": "0.0048000000000000004",
            "increment_24h": "226.96",
            "highest_24h": "8273.99",
            "lowest_24h": "7793.08",
            "volume_24h": "1562.8090014485338",
            "highest_bid": "8094.6",
            "highest_bid_amount": "0.0888",
            "lowest_ask": "8101.5",
            "lowest_ask_amount": "0.0789",
            "change_24h": "2.8822"
        },
        {
            "time": 1558325401462,
            "pair": "SF_USDT",
            "current": "0.014636",
            "volume_current": "0",
            "increment_24h": "0.001427",
            "highest_24h": "0.0153",
            "lowest_24h": "0.013205",
            "volume_24h": "213254817.139088",
            "highest_bid": "0.0145",
            "highest_bid_amount": "3600",
            "lowest_ask": "0.014747",
            "lowest_ask_amount": "5120",
            "change_24h": "10.8032"
        }
    ]
}
```

请求示例：
传递**pair**参数，并传递一个不存在的交易对
``` text
curl https://q.sfex.net/v1/market/tickers?pairs=ETH_USDT,BTC_USDT,UNKNOWN
```

响应示例：
``` javascript
{
    "code": 0,
    "data": [
        {
            "time": 1558325577317,
            "pair": "ETH_USDT",
            "current": "254.61",
            "volume_current": "0.01",
            "increment_24h": "4.36",
            "highest_24h": "263.82",
            "lowest_24h": "245.72",
            "volume_24h": "36521.60739977239",
            "highest_bid": "254.45",
            "highest_bid_amount": "0.9466",
            "lowest_ask": "254.68",
            "lowest_ask_amount": "1.002",
            "change_24h": "1.7423"
        },
        {
            "time": 1558325577505,
            "pair": "BTC_USDT",
            "current": "8085.22",
            "volume_current": "0.001",
            "increment_24h": "212.39",
            "highest_24h": "8273.99",
            "lowest_24h": "7793.08",
            "volume_24h": "1563.215864441154",
            "highest_bid": "8077.7",
            "highest_bid_amount": "0.004",
            "lowest_ask": "8082.2",
            "lowest_ask_amount": "0.0957",
            "change_24h": "2.6978"
        }
    ]
}
```

### 报价数据

URI：**/v1/ticker/{pair}**
请求方式：**GET**
参数：

| 参数名 | 类型   | 说明       | 是否必需 |
| ------ | :----- | :--------- | :------: |
| pair   | 字符串 | 交易对名称 |    是    |

请求示例：
``` text
curl https://q.sfex.net/v1/ticker/ETH_USDT
```

响应示例：
``` javascript
{
    "code": 0,
    "data": {
        "time": 1558325638318,                  // 时间，单位毫秒
        "pair": "ETH_USDT",                     // 交易对名称
        "current": "254.23",                    // 现价
        "volume_current": "1.60515",            // 现量
        "increment_24h": "3.47",                // 24小时价格变化量
        "highest_24h": "263.82",                // 24小时最高价
        "lowest_24h": "245.72",                 // 24小时最低价
        "volume_24h": "36492.895490131676",     // 24小时成交量
        "highest_bid": "253.96",                // 买一价
        "highest_bid_amount": "0.9493",         // 买一量
        "lowest_ask": "254.18",                 // 卖一价
        "lowest_ask_amount": "1.0088",          // 卖一量
        "change_24h": "1.3838"                  // 24小时涨跌幅，百分比
    }
}
```

### 周期数据

### 按结果集长度查询周期数据
URI：**/v1/history/{pair}?period={period}&size={size}**
请求方式：**GET**
参数：

| 参数名         | 类型        | 说明 | 是否必需 |
| ------------- |:------------- | :-----| :-----:|
| pair | 字符串 | 交易对名称 | 是 |
| period | 字符串 | 行情周期 | 是 |
| size | 整型 | 结果集长度 | 是 |

##### 周期参数(**period**)

|  参数  | 定义  |  参数  | 定义  |  参数  | 定义  |
| :---: | :---: | :---: | :---: | :---: | :---: |
|  1m   |  一分钟  |  1h   |  一小时  |  1d   |    日    |
|  5m   |  五分钟  |  2h   |  两小时  |  1w   |    周    |
|  15m  | 十五分钟 |  4h   |  四小时  |  1M   |    月    |
|  30m  | 三十分钟 |  6h   |  六小时  |
|       |         |  12h  | 十二小时 |

请求示例：
``` text
curl https://q.sfex.net/v1/history/ETH_USDT?period=1m&size=5
```

响应示例：

``` javascript
{
    "code": 0,
    "data": [
        {
            "time": 1558325460000,          // 时间，单位毫秒
            "pair": "ETH_USDT",             // 交易对名称
            "values": [
                "255.01",                   // 起始价
                "254.83",                   // 结束价
                "254.83",                   // 最低价
                "255.01",                   // 最高价      
                "30.91559999999999953",     // 成交量
                "7881.4134659999998801723", // 成交额
                "255.01",                   // 上一周期结束价
                "10",                       // 成交笔数
                "2.1612"                    // 现量
            ]
        },
        {
            "time": 1558325520000,
            "pair": "ETH_USDT",
            "values": [
                "254.83",
                "254.61",
                "254.45",
                "254.83",
                "39.50499999999999796",
                "10057.7363294999994805576",
                "254.83",
                "11",
                "0.01"
            ]
        },
        {
            "time": 1558325580000,
            "pair": "ETH_USDT",
            "values": [
                "254.61",
                "254.09",
                "254.01",
                "254.61",
                "19.81239035929085264",
                "5037.8752840964070945632",
                "254.61",
                "9",
                "0.1062"
            ]
        },
        {
            "time": 1558325640000,
            "pair": "ETH_USDT",
            "values": [
                "254.09",
                "253.86",
                "253.86",
                "254.09",
                "124.9577000000000007",
                "31730.829846000000177794",
                "254.09",
                "9",
                "30"
            ]
        },
        {
            "time": 1558325700000,
            "pair": "ETH_USDT",
            "values": [
                "253.86",
                "253.69",
                "253.25",
                "253.86",
                "26.909800000000000046",
                "6823.18565900000001165514",
                "253.86",
                "8",
                "5.86635"
            ]
        }
    ]
}
```

#### 指定时间范围查询周期数据
URI：**/v1/history/millis/{pair}?period={period}&begin={begin}&end={end}**
请求方式：**GET**
请求参数：

| 参数名         | 类型        | 类型  | 是否必需 |
| ------------- |:------------- | :-----| :-----:|
| pair | 字符串 | 交易对名称 | 是 |
| period | 字符串 | 行情周期 | 是 |
| begin | 长整型 | 查询起始时间，单位为毫秒 | 是 |
| end | 长整型 | 查询结束时间，单位为毫秒 | 是 |

##### 周期参数(**period**)

|  参数  | 定义  |  参数  | 定义  |  参数  | 定义  |
| :---: | :---: | :---: | :---: | :---: | :---: |
|  1m   |  一分钟  |  1h   |  一小时  |  1d   |    日    |
|  5m   |  五分钟  |  2h   |  两小时  |  1w   |    周    |
|  15m  | 十五分钟 |  4h   |  四小时  |  1M   |    月    |
|  30m  | 三十分钟 |  6h   |  六小时  |
|       |         |  12h  | 十二小时 |

请求示例：
``` text
curl https://q.sfex.net/v1/history/millis/ETH_USDT?period=1d&begin=1557849600000&end=1558281600000
```

响应示例：
``` javascript
{
    "code": 0,
    "data": [
        {
            "time": 1529020800000,              // 时间，单位毫秒
            "pair": "ETH_USDT",                 // 交易对名称
            "values": [
                "203.99",                       // 起始价
                "238.11",                       // 结束价
                "201.01",                       // 最低价
                "238.34",                       // 最高价
                "42991.581843249507146578",     // 成交量
                "9647582.3748885118691227227",  // 成交额
                "203.99",                       // 上一周期结束价
                "12607",                        // 成交笔数
                "0.63975"                       // 现量
            ]
        },
        {
            "time": 1557936000000,
            "pair": "ETH_USDT",
            "values": [
                "238.11",
                "277.37",
                "236.08",
                "278.39",
                "40880.247579800393248008",
                "10391898.77900567010098061582",
                "238.11",
                "12609",
                "1.8884999999999998"
            ]
        },
        {
            "time": 1558022400000,
            "pair": "ETH_USDT",
            "values": [
                "277.37",
                "229.75",
                "224.25",
                "278.26",
                "40620.448719299273006462",
                "10057690.83991736915806417137",
                "277.37",
                "12509",
                "3.04455"
            ]
        },
        {
            "time": 1558108800000,
            "pair": "ETH_USDT",
            "values": [
                "229.75",
                "238.52",
                "224.66",
                "247.76",
                "48491.230859631161092733",
                "11515075.06431337213110822181",
                "229.75",
                "12684",
                "13.30905"
            ]
        },
        {
            "time": 1558195200000,
            "pair": "ETH_USDT",
            "values": [
                "238.52",
                "254.71",
                "232.53",
                "259.39",
                "45704.744444159530452967",
                "11189270.48799503193896496812",
                "238.52",
                "12701",
                "6"
            ]
        },
        {
            "time": 1558281600000,
            "pair": "ETH_USDT",
            "values": [
                "254.71",
                "253.08",
                "245.72",
                "263.82",
                "18601.54400774242991201",
                "4727467.59219294652509960089",
                "254.71",
                "6576",
                "5.67345"
            ]
        }
    ]
}
```

### 成交数据

URI：**/v1/deal/{pair}?size={size}**
请求方式：**GET**
参数：

| 参数名         | 类型  | 说明          | 是否必需 |
| ------------- | :-----|:------------- | :-----:|
| pair | 字符串 | 交易对名称 | 是 |
| size | 整型 | 结果集长度 | 是 |

请求示例：
``` text
curl https://q.sfex.net/v1/deal/ETH_USDT?size=2
```

响应示例：
``` javascript
{
    "code": 0,
    "data": [
        {
            "time": 1558326382554,  // 时间，单位毫秒
            "values": [
                "252.74",           // 成交价
                "0.01785"           // 成交量
            ],
            "side": "buy"           // 成交方向
        },
        {
            "time": 1558326373804,
            "values": [
                "252.63",
                "0.01"
            ],
            "side": "sell"
        },
        {
            "time": 1558326365492,
            "values": [
                "252.77",
                "0.5643"
            ],
            "side": "buy"
        }
    ]
}
```



### 订单数据

URI：**/v1/orderbook/{pair}?offset={offset}&accuracy={accuracy}&size={size}**
请求方式：**GET**
参数：

| 参数名         | 类型        | 说明 | 是否必需 |
| ------------- |:------------- | :-----| :-----:|
| pair | 字符串 | 交易对名称 | 是 |
| size | 整型 | 档位数，可选：5、10、20 | 是 |
| offset | 整型 | 浮点位偏移量 | 是 |
| accuracy | 整型 | 统计精度 | 是 |

#### 统计精度(**accuracy**)
用于多空双方查询、订单推送接口，进位模式half_even

| 参数 |     定义      |
| :--: | :-----------: |
|  1   |  精度保留为1  |
|  2   | 精度保留为2.5 |
|  5   |  保留精度为5  |



#### 浮点位偏移量(**offset**)

用于涉及买卖双方的API，进位模式half_even，可选范围：**0～10**；
偏移量最大为10，当交易品种浮点位精度小于10时，最大偏移量为该交易品种浮点位精度

推送格式：

| 参数名         | 类型  | 说明          |
| :------------ | :-----|:------------- |
| asks | 数组 | 卖方订单档位集合 |
| bids | 数组 | 买方订单档位集合 |

请求示例
``` text
curl https://q.sfex.net/v1/orderbook/ETH_USDT?offset=0&accuracy=1&size=5
```

响应示例：
``` javascript
{
    "code": 0,
    "data": {
        "asks": [
            {
                "values": [
                    "253.22", 	// 卖价
                    "0.9925"    // 卖量
                ]
            },
            {
                "values": [
                    "253.25",
                    "0.8394"
                ]
            },
            {
                "values": [
                    "253.27",
                    "0.9942"
                ]
            },
            {
                "values": [
                    "253.29",
                    "0.025"
                ]
            },
            {
                "values": [
                    "253.31",
                    "1.0073"
                ]
            }
        ],
        "bids": [
            {
                "values": [
                    "253.09", 	// 买价
                    "0.9573"    // 买量
                ]
            },
            {
                "values": [
                    "253.05",
                    "0.0289"
                ]
            },
            {
                "values": [
                    "253.04",
                    "0.9416"
                ]
            },
            {
                "values": [
                    "253",
                    "0.9501"
                ]
            },
            {
                "values": [
                    "252.98",
                    "0.9452"
                ]
            }
        ]
    }
}
```

### 获取服务器时间

URI：**/v1/time**
请求方式：**GET**
    请求参数：无
请求示例：
``` text
curl https://q.sfex.net/v1/time
```
响应示例：
``` javascript
{
    "iso":"2019-05-20T12:31:11.508+08:00",      // ISO8601 (yyyy-MM-ddTHH:mm:ss.SSSZZ) 格式时间戳
    "mills":1558326671508,                      // 时间戳，单位为毫秒
    "epoch":1558326671                          // Unsfex time
}
```
